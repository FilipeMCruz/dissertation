\chapter{Requirements Elicitation}
\label{chap:requirements}

In this chapter the functional and non-functional requirements will be presented. ``A software requirement is a capability needed by the user to solve a problem or to achieve an objective. In other words, requirement is a software capability that must be met or possessed by a system or system component to satisfy a contract, standard, specification, or other formally imposed documentation. Ultimately, what we want to achieve is to develop quality software that meets customers' real needs on time and within budget.'' (\cite{req}).

The project followed the Scrum methodology described by \cite{schwaber1997scrum}, with monthly sprints that ended in presentations of the software to the company and weekly meetings focussing on reviewing the progress, discussing issues that rose and future ideas to add to the backlog.

The project high-level goal was well defined since the start: develop an IoT Platform with focus on extensibility to decrease the delivery time of new business cases and alow others to implement their business on top of the platform.

The definitive business cases to develop changed various times during the project lifespan due to intricate contract promises with third parties that never ended up seeing the light of day. The requested business cases, ordered by the first time they were requested, can be summarized in Table~~\ref{tab:requirements:servicerequests}.

\begin{table}[H]
    \centering
    \begin{tabular}{@{}ccllll@{}}
    \toprule
    \textbf{Org} &
      \textbf{Business Case} &
      \textbf{\begin{tabular}[c]{@{}l@{}}Deployment\\ Type\end{tabular}} &
      \textbf{\begin{tabular}[c]{@{}l@{}}Storage \\ Resources\end{tabular}} &
      \textbf{\begin{tabular}[c]{@{}l@{}}Data \\ Access\end{tabular}} &
      \textbf{\begin{tabular}[c]{@{}l@{}}Information \\ Visualization\\  Location\end{tabular}} \\ \midrule
    \multirow{5}{*}{A} & Fleet Management           & On-Premise & Dedicated & Private & Sensae Console     \\ \cmidrule(l){2-6} 
                       & Smart Irrigation           & On-Premise & Dedicated & Private & Sensae Console     \\ \cmidrule(l){2-6} 
                       & Smart Parking              & On-Premise & Dedicated & Private & Sensae Console     \\ \cmidrule(l){2-6} 
                       & Indoor Fire Detention      & On-Premise & Dedicated & Private & Sensae Console     \\ \cmidrule(l){2-6} 
                       & Public Health Surveillance & On-Premise & Dedicated & Public  & Sensae Console     \\ \midrule
    B                  & Fleet Management           & Cloud      & Dedicated & Private & Org B Platform \\ \midrule
    \multirow{3}{*}{C} & Smart Irrigation           & Cloud      & Shared    & Private & Sensae Console     \\ \cmidrule(l){2-6} 
                       & Indoor Fire Detention      & Cloud      & Shared    & Private & Sensae Console     \\ \cmidrule(l){2-6} 
                       & Chicken Farm Monitoring    & Cloud      & Shared    & Private & Sensae Console     \\ \midrule
    D                  & Smart Irrigation           & Cloud      & Shared    & Private & Sensae Console     \\ \bottomrule
    \end{tabular}
    \caption[Summary of the main requirements of the requested business cases]{Summary of the main requirements of the requested business cases}
    \label{tab:requirements:servicerequests}
\end{table}

The requirements detailed in the following sections were founded on top of the requested business cases mentioned above. This requirements were constantly tailored according to the latest talks with the third parties involved. Even though many requested business cases weren't implemented they conditioned the design and development of the final solution, \textbf{Sensae Console}.

At the time of writing, the solution answers three business cases: (i) Fleet Management, (ii) Smart Irrigation and (iii) Indoor Fire Detention. The other business cases were either abandoned or requested too close to the writing of this dissertation and therefore will not be detailed.

\section{Functional Requirements}
\label{sec:requirements:functional}

Functional Requirements define the user-faced functionalities/operations that the solution to develop must support in the future.

According to \cite{van2009requirements}, ``Functional requirements define the functional effects that the software-to-be is required to have on its environment. The effects characterized by such requirements result from operations to be automated by the software. Functional requirements may also refer to environmental conditions under which operations should be applied.''

The following sections describe the requirements associated with each role inside \textbf{Sensae Console}, the solution that this project aims to deliver.

The meetings that took place during this project lifespan lead to the definition of three main roles inside \textbf{Sensae Console}:

\begin{itemize}
    \item \textbf{Manager}: a tenant with full control over the system and all its data;
    \item \textbf{Costumer}: a tenant with restricted control over the devices, employees and departments registered under his/her own organization;
    \item \textbf{Anonymous User}: a tenant with no account in the system. He/She has access to information about certain business cases fed with data from \textit{'public'} devices in the system;
\end{itemize}

Apart from the basic costumer requirements, each business case has specific use cases that will be detailed in the section~\ref{subsec:requirements:functional:costumer}.

Essentially, the difference between this roles comes down to what permissions each tenant has been assigned and the extent of data he can visualize. The Section~\ref{subsubsec:design:domain:bounded_contexts:identity} details how this is handled by the solution.

\subsection{Manager}
\label{subsec:requirements:functional:manager}

The purpose of the Manager is to supervise an instance of \textbf{Sensae Console} and its costumers. This role is an extension of the Costumer role and can do and see everything a Costumer can. A Manager is assign to an instance of \textbf{Sensae Console} at creation time and belongs to the highest domain, the \textit{Root Organization} as described at Section~\ref{subsubsec:design:domain:bounded_contexts:identity}.

The following list documents the functional requirements related to this actor regarding the \textbf{Sensae Console} administration:

\begin{itemize}
    \item The Manager must be able to create, view, update and delete device payload decoders;
    \item The Manager must be able to create, view, update and delete device payload processors (or mappers);
    \item The Manager must be able to create, view, update and delete rules that trigger alerts;
    \item The Manager must be able to define, view, update and remove device specific information;
    \item The Manager must be able to define the permissions of any organization;
    \item The Manager must be able to assign new devices to a specific organization;
    \item The Manager must be able to assign new authenticated users to a specific organization;
\end{itemize}

As described in Sections~\ref{subsubsec:design:domain:bounded_contexts:processor} and ~\ref{subsubsec:design:domain:bounded_contexts:decoder}, the decoders and processors referenced in the first and second items are meant to translate unsanitized device data.

The rules referenced in the third item can be used to program how the system answers to certain abnormal occurrences, more context is given in Section~\ref{subsubsec:design:domain:bounded_contexts:rule}.

The device information mentioned in item four is detailed in Section~\ref{subsubsec:design:domain:bounded_contexts:device}.

Even tho the first four groups of operation belong to the Manager role, can be assigned to normal Costumers on special occasions. As an example, the Organization A and B referenced in Table~\ref{tab:requirements:servicerequests}, had employees capable of fully managing the solution and wanted an instance of \textbf{Sensae Console} exclusively for them. This meant that, when given access to this operations, there was a lower risk for them to misconfigure the platform due to a lack of knowledge and no risk to interfere with other Organizations data pipeline, since they were the only ones in that instance.

\subsection{Costumer}
\label{subsec:requirements:functional:costumer}

The purpose of a Costumer is to manage his/her own organizations and benefit from each of the \textbf{Sensae Console} supported business cases. Each business case has specific use cases defined below.

The following list documents the universal functional requirements related to this role:

\begin{itemize}
    \item A Costumer must be able to create and remove a department under his/her organization;
    \item A Costumer must be able to define the permissions for all tenants in a department under his/hers organization;
    \item A Costumer must be able to assign and move a tenant from/to a department under his/her organization;
    \item A Costumer must be able to move a sensor from one department to another department under his/hers organization;
\end{itemize}

\subsubsection*{Fleet Management}
\label{subsubsec:requirements:functional:costumer:fleet}

Within a simple Fleet Management business case the major utilities a Costumer can benefit from are: real-time tracking of his vehicles and visualizing past data regarding the whereabouts of his fleet. A more advanced Fleet Management would for example provide \gls{KPI} reports about the fleet or alerts when a vehicle would enter or leave a geofence. This advanced topics were mentioned by organization A close to the day when they withdrawn the contract and therefore were never implemented.

The following list documents the key functional requirements of this business case as prescribed by the third parties:

\begin{itemize}
    \item A Costumer must be able to track in real-time a vehicle location and motion status;
    \item A Costumer must be able to see the itineraries of a vehicle in defined time span;
    \item A Costumer must be able to see where, when and for how long a vehicle was parked;
    \item A Costumer must be able to see the traveled distance of a vehicle, in a defined time span;
\end{itemize}

This business case' concepts are discussed with more detail in Section~\ref{subsubsec:design:domain:bounded_contexts:fleet}.

\subsubsection*{Smart Irrigation}
\label{subsubsec:requirements:functional:costumer:irrigation}

Within a Smart Irrigation business case the major utilities a Costumer can benefit from are: real-time tracking of a garden/greenhouse conditions, archiving conditions for later use/consulting and activate/deactivate the irrigation system remotely.

The following list documents the key functional requirements related to this business case as prescribed by the third parties:

\begin{itemize}
    \item A Costumer must be able to track a gardens' conditions in real-time;
    \item A Costumer must be able to see past conditions of a garden;
    \item A Costumer must be able to activate and deactivate the irrigation system remotely;
\end{itemize}

The concepts surrounding this business case are discussed with more detail in Section~\ref{subsubsec:design:domain:bounded_contexts:irrigation}.

\subsubsection*{Indoor Fire Detention}
\label{subsubsec:requirements:functional:costumer:fire}

An Indoor Fire Detention system usual main objective is to trigger an alarm when precarious conditions are meet. As a first milestone, both companies, A and C, requested a simple alarm system with no other features. Features such as data retention, data visualization and continuous camera vigilance were later requested but never implemented. As such, the only requirement related to this business case is:

A Costumer must be able to receive alerts regarding critical conditions that may indicate a fire outbreak.

\subsection{Anonymous User}
\label{subsec:requirements:functional:anonymous}

This role was created to answer organization A concerns regarding the Public Health Surveillance business case. The website should be available for the public to consult the current and past \gls{AQI} levels measured in the city. 

\section{Non Functional Requirements}
\label{sec:requirements:non_functional}

\section{Synopsis}
\label{sec:requirements:synopsis}
